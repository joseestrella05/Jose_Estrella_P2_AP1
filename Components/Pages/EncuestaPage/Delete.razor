@page "/Encuesta/Index"
@inject EncuestaServices EncuestaServices

<PageTitle>Índice de Encuestas</PageTitle>

<div class="container">
    <h3>Lista de Encuestas</h3>
    <a href="/Encuesta/Create" class="btn btn-primary mb-3">
        <span class="bi bi-plus"></span> Crear Nueva
    </a>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>EncuestaId</th>
                <th>Fecha</th>
                <th>Asignatura</th>
                <th>Ciudad Principal</th>
                <th>Monto Total</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var encuesta in Encuestas)
            {
                <tr>
                    <td>@encuesta.EncuestasId</td>
                    <td>@encuesta.Fecha.ToString("dd/MM/yyyy")</td>
                    <td>@encuesta.Asignatura</td>
                    <td>
                        <a href="/Encuesta/Edit/@encuesta.EncuestasId" class="btn btn-sm btn-warning bi bi-pencil">
                            Editar
                        </a>
                        <a href="/Encuesta/Delete/@encuesta.EncuestasId" class="btn btn-sm btn-danger bi bi-trash">
                            Eliminar
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    public List<Encuestas> Encuestas { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        Encuestas = await EncuestaServices.Listar(e => true);
    }
}